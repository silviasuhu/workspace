FROM ubuntu:22.04

RUN apt update \
    && apt install -y \
    sudo \
    python3 \
    git \
    vim \
    libxml2-dev \
    libssl-dev \
    libcurl3-dev \
    libkrb5-dev \
    libsasl2-dev \
    libldap-dev \
    python3.10-venv \
    wget \
    curl \
    fzf \
    jq \
    bat \
    openssh-client \
    tmux \
    curl \
    wget \
    unzip \
    build-essential \
    python3-pip

RUN pip3 install \
    python-dateutil \
    psutil \
    pymongo \
    packaging

RUN useradd \
    -rm \
    -d /home/ubuntu \
    -s /bin/bash \
    -g root \
    -G sudo \
    -u 1001 ubuntu
RUN passwd -d ubuntu
USER ubuntu
WORKDIR /home/ubuntu
ENV USER=ubuntu

RUN mkdir -p -m 700 /home/ubuntu/.ssh \
    && ssh-keyscan github.com >> /home/ubuntu/.ssh/known_hosts

# Setup tmux
RUN mkdir -p $HOME/.tmux/plugins \
    && git clone https://github.com/tmux-plugins/tpm.git /home/ubuntu/.tmux/plugins/tpm